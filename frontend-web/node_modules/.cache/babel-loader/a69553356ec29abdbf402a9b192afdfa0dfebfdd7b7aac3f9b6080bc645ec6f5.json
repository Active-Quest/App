{"ast":null,"code":"var _jsxFileName = \"/Users/bornovak/Programi/App/frontend-web/src/Header.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./Header.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = \"http://localhost:3000\";\nconst Header = () => {\n  _s();\n  const [showSettings, setShowSettings] = useState(false);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [user, setUser] = useState(null);\n  const fileInputRef = useRef(null);\n\n  // Load user from localStorage\n  useEffect(() => {\n    const stored = localStorage.getItem(\"tetrisUser\");\n    if (stored) setUser(JSON.parse(stored));\n  }, []);\n  const toggleSettings = () => {\n    setShowSettings(s => !s);\n    setShowDropdown(false);\n    document.body.style.overflow = showSettings ? \"auto\" : \"hidden\";\n  };\n  const handleAvatarClick = () => {\n    setShowDropdown(d => !d);\n    setShowSettings(false);\n  };\n  const handleLogout = () => {\n    localStorage.removeItem(\"tetrisUser\");\n    setUser(null);\n    setShowDropdown(false);\n  };\n  const handleFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file || !(user !== null && user !== void 0 && user._id)) return;\n    const form = new FormData();\n    form.append(\"profilePicture\", file);\n    try {\n      const {\n        data\n      } = await axios.put(`${API_BASE}/api/users/update-profile-picture/${user._id}`, form, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      setUser(data);\n      localStorage.setItem(\"tetrisUser\", JSON.stringify(data));\n    } catch {\n      alert(\"Could not upload profile picture.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      ref: fileInputRef,\n      style: {\n        display: \"none\"\n      },\n      onChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon-button\",\n        onClick: () => window.history.back(),\n        children: \"\\u2190\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"header-title\",\n        children: \"TETRIS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar-container\",\n        children: [user ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.profilePicture ? `${API_BASE}${user.profilePicture}` : \"https://cdn-icons-png.flaticon.com/512/149/149071.png\",\n          alt: \"Profile\",\n          className: \"header-profile-pic\",\n          onClick: handleAvatarClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon-button\",\n          onClick: handleAvatarClick,\n          children: \"\\uD83D\\uDC64\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), showDropdown && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => fileInputRef.current.click(),\n            children: \"Change Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), user && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"icon-button\",\n        onClick: toggleSettings,\n        children: \"\\u2699\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), showSettings && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"settings-modal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(Header, \"hpNwPRSRHST2+YVKNGzU5E404jo=\");\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","Header","_s","showSettings","setShowSettings","showDropdown","setShowDropdown","user","setUser","fileInputRef","stored","localStorage","getItem","JSON","parse","toggleSettings","s","document","body","style","overflow","handleAvatarClick","d","handleLogout","removeItem","handleFileChange","e","file","target","files","_id","form","FormData","append","data","put","headers","setItem","stringify","alert","children","type","accept","ref","display","onChange","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","window","history","back","src","profilePicture","alt","current","click","_c","$RefreshReg$"],"sources":["/Users/bornovak/Programi/App/frontend-web/src/Header.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./Header.css\";\n\nconst API_BASE = \"http://localhost:3000\";\n\nconst Header = () => {\n  const [showSettings, setShowSettings] = useState(false);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [user, setUser] = useState(null);\n  const fileInputRef = useRef(null);\n\n  // Load user from localStorage\n  useEffect(() => {\n    const stored = localStorage.getItem(\"tetrisUser\");\n    if (stored) setUser(JSON.parse(stored));\n  }, []);\n\n  const toggleSettings = () => {\n    setShowSettings(s => !s);\n    setShowDropdown(false);\n    document.body.style.overflow = showSettings ? \"auto\" : \"hidden\";\n  };\n\n  const handleAvatarClick = () => {\n    setShowDropdown(d => !d);\n    setShowSettings(false);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"tetrisUser\");\n    setUser(null);\n    setShowDropdown(false);\n  };\n\n  const handleFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file || !user?._id) return;\n\n    const form = new FormData();\n    form.append(\"profilePicture\", file);\n\n    try {\n      const { data } = await axios.put(\n        `${API_BASE}/api/users/update-profile-picture/${user._id}`,\n        form,\n        { headers: { \"Content-Type\": \"multipart/form-data\" } }\n      );\n      setUser(data);\n      localStorage.setItem(\"tetrisUser\", JSON.stringify(data));\n    } catch {\n      alert(\"Could not upload profile picture.\");\n    }\n  };\n\n  return (\n    <>\n      <input\n        type=\"file\"\n        accept=\"image/*\"\n        ref={fileInputRef}\n        style={{ display: \"none\" }}\n        onChange={handleFileChange}\n      />\n\n      <header className=\"header\">\n        <div className=\"icon-button\" onClick={() => window.history.back()}>\n          &#8592;\n        </div>\n\n        <h1 className=\"header-title\">TETRIS</h1>\n\n        <div className=\"avatar-container\">\n          {user ? (\n            <img\n              src={\n                user.profilePicture\n                  ? `${API_BASE}${user.profilePicture}`\n                  : \"https://cdn-icons-png.flaticon.com/512/149/149071.png\"\n              }\n              alt=\"Profile\"\n              className=\"header-profile-pic\"\n              onClick={handleAvatarClick}\n            />\n          ) : (\n            <div className=\"icon-button\" onClick={handleAvatarClick}>\n              &#128100;\n            </div>\n          )}\n\n          {showDropdown && (\n            <div className=\"profile-dropdown\">\n              <button onClick={() => fileInputRef.current.click()}>\n                Change Picture\n              </button>\n              {user && (\n                <button onClick={handleLogout}>\n                  Logout\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n\n        <div className=\"icon-button\" onClick={toggleSettings}>\n          &#9881;\n        </div>\n      </header>\n\n      {showSettings && (\n        <div className=\"settings-modal\">\n          {/* … your existing settings UI … */}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Header;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}